<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
      
        <script src="./bundle.js" defer></script>
        <title>Login</title>
        <meta content="" name="description">
        <meta content="" name="keywords">
      
        <!-- MDB -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.1.0/mdb.min.css" rel="stylesheet"/>
        
        <!-- Favicons -->
        <link href="assets/img/game-console.png" rel="icon">
      
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
      
        <!-- Vendor CSS Files -->
        <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
        <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
        <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
        <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
        <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
        <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
      
        <!-- Template Main CSS File -->
        <link href="assets/css/style.css" rel="stylesheet">
      
        <!-- =======================================================
        * Template Name: Tempo
        * Updated: Mar 10 2023 with Bootstrap v5.2.3
        * Template URL: https://bootstrapmade.com/tempo-free-onepage-bootstrap-theme/
        * Author: BootstrapMade.com
        * License: https://bootstrapmade.com/license/
        ======================================================== -->
</head>
<body>
  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top ">
    <div class="container d-flex align-items-center justify-content-between">

      <h1 class="logo"><a href="index.html">VideoGame.is</a></h1>
      <!-- Uncomment below if you prefer to use an image logo -->
      <!-- <a href="index.html" class="logo"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>       -->
      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="#hero">Home</a></li>
        </ul>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  <section id="hero">
    <div class="hero-container">
      <!-- <h3><strong>Welcome!</strong></h3> -->
      <h1>Welcome!</h1>
      <!-- <h2>Wanna know who has the biggest sales today?</h2> -->
      <a class="btn-get-started scrollto" data-mdb-toggle="modal" data-mdb-target="#loginModal">Get Started</a>
    </div>
  </section><!-- End Hero -->

<!-- Login Modal -->
<div class="modal top fade" id="loginModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-mdb-backdrop="static" data-mdb-keyboard="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" class="fw-bold mb-2 text-uppercase" id="exampleModalLabel"><strong>Login</strong></h2>
                <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <div class="mb-md-5 mt-md-4 pb-2">
                    <p class="text-dark-50 mb-5 text-center">Please enter your username and password!</p>
                    <form name="login_form" id="login_form" method="post" action="#" enctype="multipart/form-data">
                    <div class="form-outline form-black mb-4">
                        <input type="email" id="loginEmail" class="form-control form-control-lg" />
                        <label class="form-label" for="email">Email</label>
                    </div>
                    <div class="form-outline form-black mb-4">
                        <input type="password" id="loginPassword" class="form-control form-control-lg" />
                        <label class="form-label" for="password">Password</label>
                    </div>
                    <button type="button" id="login" name="login" class="btn btn-warning ">Login</button>
                    </form>
                    <br>
                    <p class="fw-bold mx-3 mb-0 text-muted">OR</p>
                    <br>
                    <button type="button" id="googleLogin" name="googleLogin" class="btn btn-primary" style="background-color: #0F9D58"><i class="fab fa-google "></i> Sign in with Google</button>
                    <button type="button" id="facebookLogin" name="facebookLogin" class="btn btn-primary" style="background-color: #3b5998"><i class="fab fa-facebook-f"></i> Sign in with Facebook</button>
                </div>
            </div>    
            <div class="modal-footer">
                <div class="text-center">
                    <p class="mb-0">Don't have an account? 
                    <a class="text-link-50 fw-bold" data-mdb-toggle="modal" data-mdb-target="#signupModal">Signup</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Login Modal End -->

<!-- Signup Modal -->
<div class="modal top fade" id="signupModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" data-mdb-backdrop="static" data-mdb-keyboard="true">
    <div class="modal-dialog   modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" class="fw-bold mb-2 text-uppercase" id="exampleModalLabel"><strong>Register New Account</strong></h2>
                <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <div class="mb-md-5 mt-md-4 pb-2">
                    <p class="text-dark-50 mb-5 text-center">Please enter your account details!</p>
                    <form name="registration_form" id="registration_form" method="post" action="#" enctype="multipart/form-data" >
                    <div class="form-outline form-black mb-4">
                        <input type="email" id="newEmail" class="form-control form-control-lg" />
                        <label class="form-label" for="email">Email</label>
                    </div>
                    <div class="form-outline form-black mb-4">
                        <input type="password" id="newPassword" class="form-control form-control-lg" />
                        <label class="form-label" for="password">Password</label>
                    </div>
                    <button type="button" id="register" name="register" class="btn btn-warning">Signup</button>
                    </form>
                    <br>
                    <p class="fw-bold mx-3 mb-0 text-muted">OR</p>
                    <br>
                    <button type="button" id="googleLogin" name="googleLogin" class="btn btn-primary" style="background-color: #0F9D58"><i class="fab fa-google "></i> Sign in with Google</button>
                    <button type="button" id="facebookLogin" name="facebookLogin" class="btn btn-primary" style="background-color: #3b5998"><i class="fab fa-facebook-f"></i> Sign in with Facebook</button>
                </div>
            </div>    
            <div class="modal-footer">
                    <p class="mb-0">Already have an account? <a class="text-link-50 fw-bold" data-mdb-toggle="modal" data-mdb-target="#loginModal">Login</a></p>
                </div>
        </div>
    </div>
</div>
<!-- Signup Modal End -->

<!-- MDB -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.1.0/mdb.min.js"></script>

</body>
</html>

<script type="module">
// Import the functions you need from the SDKs you need
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
import { 
    getAuth, 
    createUserWithEmailAndPassword, 
    signInWithEmailAndPassword, 
    signOut, 
    GoogleAuthProvider, 
    FacebookAuthProvider,  
    signInWithRedirect, 
    getRedirectResult } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDWFlcUirDy_M6S_U9WNITNKtTOJfBFgTE",
  authDomain: "fir-itd108.firebaseapp.com",
  projectId: "fir-itd108",
  storageBucket: "fir-itd108.appspot.com",
  messagingSenderId: "362658377321",
  appId: "1:362658377321:web:2c667a90ba18c5fe7d3cf8",
  measurementId: "G-6LCYHW6ZFH"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const auth = getAuth();
const provider = new GoogleAuthProvider(app);
const fbProvider = new FacebookAuthProvider(app);
console.log(app)

//----- New Registration code start	  
document.getElementById("register").addEventListener("click", function() {
  var email =  document.getElementById("newEmail").value;
  var password = document.getElementById("newPassword").value;
  
  //For new registration
  createUserWithEmailAndPassword(auth, email, password).then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    console.log(user);
    alert("Registration successfully!!");
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    // ..
    console.log(errorMessage);
    alert(error);
  });		  		  
});
//----- End

//----- Login code start	  
document.getElementById("login").addEventListener("click", function() {
  var email =  document.getElementById("loginEmail").value;
  var password = document.getElementById("loginPassword").value;

  signInWithEmailAndPassword(auth, email, password).then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    console.log(user);
    alert(user.email+" Login successfully!!!");
    // redirect to index.html
    window.location.href = "./main.html";
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    console.log(errorMessage);
    alert(errorMessage);
  });		  		  
});
//----- End

// Google OAuth
document.getElementById("googleLogin").addEventListener("click", function() {
    signInWithRedirect(auth, provider);

    getRedirectResult(auth)
        .then((result) => {
        // This gives you a Google Access Token. You can use it to access Google APIs.
        const credential = GoogleAuthProvider.credentialFromResult(result);
        const token = credential.accessToken;

        // The signed-in user info.
        const user = result.user;
        console.log(user);
        alert(user.email+" Login successfully!!!");
        // redirect to index.html
         window.location.href = "./main.html";
        }).catch((error) => {
        // Handle Errors here.
        const errorCode = error.code;
        const errorMessage = error.message;
        // The email of the user's account used.
        const email = error.customData.email;
        // The AuthCredential type that was used.
        const credential = GoogleAuthProvider.credentialFromError(error);
  });
});

// Facebook OAuth
document.getElementById("facebookLogin").addEventListener("click", function() {
    signInWithRedirect(auth, fbProvider);

    getRedirectResult(auth)
        .then((result) => {
        // This gives you a Facebook Access Token. You can use it to access the Facebook API.
        const credential = FacebookAuthProvider.credentialFromResult(result);
        const token = credential.accessToken;

        const user = result.user;
        console.log(user);
        alert(user.email+" Login successfully!!!");
        // redirect to index.html
        window.location.href = "./main.html";
        }).catch((error) => {
        // Handle Errors here.
        const errorCode = error.code;
        const errorMessage = error.message;
        // The email of the user's account used.
        const email = error.customData.email;
        // AuthCredential type that was used.
        const credential = FacebookAuthProvider.credentialFromError(error);
        // ...
    });
});
</script>